<div data-ng-init="init()">
    <ol id="searchByOSTBreadCrumb" class="breadcrumb list-inline text-center lBlue">
        <li><a href="/dashboard">Search Selection</a></li>
        <li ui-sref-active="" ui-sref-opts="{cache: false,reload: true}" class="active">Search By Online Share Trading</li>
    </ol>
    <div class="container-fluid">
        <form name="searchOSTForm" ng-submit="searchByTypePrincipal(searchValue)" data-toggle="validator">
            <div ng-show="errorMessage" id="searchFormError" class="loginMargin panel-primary alert alert-danger">
                <strong>{{errorMessage}}</strong>
            </div>
            <div class="col-xs-12 input-group">
                <div class="form-inline">
                    <div class="col-xs-2">
                    </div>
                    <div class="col-xs-3">
                        <div class="input-append">
                            <input type="text" class="form-control input-medium search-query" id="ostSearchInput"
                                   ng-model="searchValue" placeholder="Search By Online Share Trader" autofocus="autofocus" tabindex="1"
                                   required>
                        </div>
                    </div>
                    <div class="col-xs-1">
                        <button data-ng-disabled="searchOSTForm.$invalid" id="searchByOSTBtn" type="submit" tabindex="2"
                                class="btn btn-primary btn-block searchButtonSmallScreen">
                            Search
                        </button>
                    </div>
                </div>
            </div>
        </form>
        <div>&nbsp;</div>
        <div class="col-xs-12" ng-show="searching">

            <table class="table table-bordered table-striped" id="searchList">
                <thead>
                <tr class="bg-info">
                    <th><button id="ostFilterName" ng-click="order('displayName')" style="display: block; width: 100%;">OST Display Name</button>
                        <span ng-show="predicate === 'displayName'" ng-class="{reverse:reverse}"></span>
                    </th>
                    <th><button id="userNameFilterOST" ng-click="order('userName')" style="display: block; width: 100%;">Digital ID</button>
                        <span ng-show="predicate === 'userName'" ng-class="{reverse:reverse}"></span>
                    </th>
                    <th><button id="lastLoggedInFilterOST" ng-click="order('lastLoggedIn')" style="display: block; width: 100%;">Last Login</button>
                        <span ng-show="predicate === 'lastLoggedIn'" ng-class="{reverse:reverse}"></span>
                    </th>
                    <th><button id="channelIndicatorFilterOST" ng-click="order('channelIndicator')" style="display: block; width: 100%;">Registration Channel</button>
                        <span ng-show="predicate === 'channelIndicator'" ng-class="{reverse:reverse}"></span>
                    </th>
                    <th><button id="registrationDateFilterOST" ng-click="order('registrationDate')" style="display: block; width: 100%;">Registration Date</button>
                        <span ng-show="predicate === 'registrationDate'" ng-class="{reverse:reverse}"></span>
                    </th>
                    <th><button id="authenticationAttemptsFilterOST" ng-click="order('authenticationAttempts')" style="display: block; width: 100%;">Password Count</button>
                        <span ng-show="predicate === 'authenticationAttempts'" ng-class="{reverse:reverse}"></span>
                    </th>
                    <th><button id="activatedFilterOST" ng-click="order('activated')" style="display: block; width: 100%;">Active</button>
                        <span ng-show="predicate === 'activated'" ng-class="{reverse:reverse}"></span>
                    </th>
                    <th><button id="disabledFilterOST" ng-click="order('disabled')" style="display: block; width: 100%;">Disabled</button>
                        <span ng-show="predicate === 'disabled'" ng-class="{reverse:reverse}"></span>
                    </th>
                </tr>
                </thead>
                <tbody>
                <tr ng-repeat="searchResult in filteredCardResults.slice(((currentPage-1)*itemsPerPage), ((currentPage)*itemsPerPage)) | orderBy:predicate:reverse">
                    <td id="searchOSTName">{{searchResult.systemPrincipals[0].displayName}}</td>
                    <td><a href="" id="searchOSTResult"  tooltip="Select for more details"
                           ng-click="viewSelectedPrincipalDetails(searchResult.userName)">{{searchResult.userName}}</a>
                    </td>
                    <td>{{searchResult.lastLoggedIn | date:'medium'}}</td>
                    <td>{{searchResult.channelIndicator}}</td>
                    <td>{{searchResult.registrationDate | date:'medium'}}</td>
                    <td>{{searchResult.authenticationAttempts}}</td>
                    <td id="diStatus">{{searchResult.activated === true ? "Yes" : "No"}}</td>
                    <td id="diDisabled">{{searchResult.disabled === true ? "Yes" : "No"}}</td>
                </tr>
                </tbody>
            </table>
            <div id="searchByOSTResults">
                <h4 ng-show="!filteredCardResults">{{filteredCardResults.length}} results found</h4>
                <h4 ng-show="filteredCardResults">{{filteredCardResults.length}} results found</h4>
            </div>
            <div id="paginationID" ng-show='searchResults.length > 5'>
                <pagination
                        ng-model="currentPage"
                        total-items="searchResults.length"
                        max-size="maxSize"
                        boundary-links="true">
                </pagination>
            </div>
        </div>
    </div>
</div>
